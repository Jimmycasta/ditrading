<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <title th:text="${title}"></title>
    <style> hr {
        height: 1px;
        background-color: #ccc;
        border: none;
    } </style>
    <link href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" rel="stylesheet">
</head>
<body class="bg-dark">
<header th:insert="~{fragments/navbar.html::navbar}"></header>
<br>
<!-- <div class="container"> -->
<div class="card bg-dark border-secondary">
    <div class="card-body">
        <div class="text-light">
            <h5 th:text="${titleAction}"></h5>
        </div>
        <hr>
        <div>
            <a class="btn btn-primary btn-sm" th:href="@{/trades/list}" role="button"
               title="Regresa a lista de trades"
               style="font-size: 14px">Regresar</a>
        </div>
    </div>
</div>
<br>
<div class="card bg-dark border-secondary text-light  " style="font-size: 14px">
    <div class="card-body">
        <form class="row g-3 needs-validation" method="post" style="font-size: 14px"
              novalidate th:action="@{/trades/save}" th:object="${trade}">

            <!-- input Símbolo -->
            <div class="col-sm w-auto">
                <label for="symbol" class="form-label">Símbolo</label>
                <select class="form-select form-select-sm" required aria-label="symbol"
                        id="symbol" th:field="*{symbol}">
                    <option selected value="">None</option>
                    <option th:each="symbol : ${listSymbols}"
                            th:value="${symbol.idSymbol}"
                            th:text="${symbol.nameSymbol}"></option>
                </select>
                <small th:if="${#fields.hasErrors('symbol')}"
                       th:errors="*{symbol}"
                       th:class="'form-text text-warning'">
                </small>
            </div>


            <!-- input Intervalo -->
            <div class="col-sm w-auto">
                <label for="timeFrame" class="form-label">Intervalo</label>
                <select class="form-select form-select-sm" aria-label="Seleccione un frame"
                        id="timeFrame" name="timeFrame" th:field="*{timeFrame}">
                    <option selected value="">None</option>
                    <option th:each="frame : ${listFrames}"
                            th:value="${frame.idFrame}"
                            th:text="${frame.nameFrame}"></option>
                </select>
                <small th:if="${#fields.hasErrors('timeFrame')}"
                       th:errors="*{timeFrame}"
                       th:class="'form-text text-warning'">
                </small>
            </div>

            <!-- input Posición -->
            <div class="col-sm w-auto">
                <label for="namePosition" class="form-label">Posición</label>
                <select class="form-select form-select-sm" aria-label="Seleccione una posición"
                        id="namePosition" name="namePosition" th:field="*{position}">
                    <option selected value="">None</option>
                    <option th:each="position : ${listPositions}"
                            th:value="${position.idPosition}"
                            th:text="${position.namePosition}">
                    </option>
                </select>
                <small th:if="${#fields.hasErrors('position')}"
                       th:errors="*{position}"
                       th:class="'form-text text-warning'">
                </small>
            </div>

            <!-- input Estrategia-->
            <div class="col-sm w-auto">
                <label for="strategy" class="form-label">Estrategia</label>
                <select class="form-select form-select-sm" aria-label="strategy"
                        id="strategy" th:field="*{strategy}">
                    <option selected value="">None</option>
                    <option th:each="strategy : ${listStrategies}"
                            th:value="${strategy.idStrategy}"
                            th:text="${strategy.nameStrategy}"></option>
                </select>
                <small th:if="${#fields.hasErrors('strategy')}"
                       th:errors="*{strategy}"
                       th:class="'form-text text-warning'">
                </small>
            </div>

            <!-- input chartPattern-->
            <div class="col-sm w-auto">
                <label for="chartPattern" class="form-label">Patrón/grafico</label>
                <select class="form-select form-select-sm" aria-label="strategy"
                        id="chartPattern" th:field="*{chartPattern}">
                    <option selected value="">None</option>
                    <option th:each="pattern : ${listChartPattern}"
                            th:value="${pattern.idPattern}"
                            th:text="${pattern.namePattern}"></option>
                </select>
                <small th:if="${#fields.hasErrors('strategy')}"
                       th:errors="*{chartPattern}"
                       th:class="'form-text text-warning'">
                </small>
            </div>

            <!-- input Fecha/Compra
            <div class="col-sm w-auto">
                <label for="entryDate" class="form-label">Fecha/Compra</label>
                <input type="date" class="form-control form-control-sm"
                       name="entryDate" id="entryDate" aria-describedby="entryDate" style="font-size: 14px;"
                       th:value="${trade.entryDate}">
                <small th:if="${#fields.hasErrors('entryDate')}"
                       th:errors="*{entryDate}"
                       th:class="'form-text text-warning'">
                </small>
            </div>  -->

            <!-- input Cantidad -->
            <div class="col-sm w-auto">
                <label for="assetsQuantity" class="form-label">Cantidad</label>
                <input type="text" class="form-control form-control-sm" name="assetsQuantity"
                       id="assetsQuantity" aria-describedby="assetsQuantity" style="font-size: 14px;"
                       placeholder="0" th:field="*{assetsQuantity}">
                <small th:if="${#fields.hasErrors('assetsQuantity')}"
                       th:errors="*{assetsQuantity}"
                       th:class="'form-text text-warning'">
                </small>
            </div>

            <!-- input Precio/Compra -->
            <div class="col-sm w-auto">
                <label for="entryPrice" class="form-label">Precio/Compra</label>
                <input type="text" class="form-control form-control-sm" name="entryPrice"
                       id="entryPrice" aria-describedby="entryPrice" style="font-size: 14px;"
                       placeholder="0.0" th:field="*{entryPrice}">
                <small th:if="${#fields.hasErrors('entryPrice')}"
                       th:errors="*{entryPrice}"
                       th:class="'form-text text-warning'">
                </small>
            </div>



            <!-- input Stop Loss -->
            <div class="col-sm w-auto">
                <label for="stopLoss" class="form-label">Stop Loss</label>
                <input type="text" class="form-control form-control-sm" name="stopLoss"
                       id="stopLoss" aria-describedby="stopLoss" style="font-size: 14px;"
                       placeholder="0.0" th:field="*{stopLoss}">
                <small th:if="${#fields.hasErrors('stopLoss')}"
                       th:errors="*{stopLoss}"
                       th:class="'form-text text-warning'">
                </small>
            </div>

            <!-- input takeProfitEstimated variable tmp usada para calcular el Risk/Reward en trade sin cerrar
            <div class="col-sm w-auto">
                <label for="takeProfitEstimated" class="form-label">Take/Profit estimado</label>
                <input type="text" class="form-control form-control-sm" name="takeProfitEstimated"
                       id="takeProfitEstimated" aria-describedby="takeProfitEstimated" style="font-size: 14px;"
                       placeholder="0.0" th:field="*{takeProfitEstimated}">
                <small th:if="${#fields.hasErrors('takeProfitEstimated')}"
                       th:errors="*{takeProfitEstimated}"
                       th:class="'form-text text-warning'">
                </small>
            </div>  -->

            <input type="hidden" th:field="*{idTrade}" id="idTrade" name="idTrade">
            <div class="mb-2 ">
                <button class="btn btn-primary btn-sm" type="submit" style="font-size: 14px;">Guardar</button>
            </div>

        </form>
    </div> <!-- Fin card-body del from -->
</div> <!-- Fin card del from -->
<!--  </div> -->

<!-- Deshabilita las fechas pasadas input type = "date" -->
<script>
    const today = new Date().toISOString().split('T')[0];
    document.getElementById("entryDate").setAttribute("min",today);
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<footer th:insert="~{fragments/footer::footer}"></footer>
</body>
</html>